<mat-grid-list
  [cols]="columns"
  [rowHeight]="actions ? '31em' : '28em'"
  *ngIf="productMap$ | async as productMap; else loadingProducts"
>
  <mat-grid-tile
    *ngFor="
      let expandedOrderItem of expandOrderItems(orderItems, productMap);
      let index = index
    "
  >
    <mat-card class="product-card">
      <mat-card-header>
        <mat-card-title>{{ expandedOrderItem.product.name }}</mat-card-title>
        <mat-card-subtitle>{{
          expandedOrderItem.orderItem | orderItemPrice : true
        }}</mat-card-subtitle>
      </mat-card-header>
      <img mat-card-xl-image [src]="expandedOrderItem.product.imageUrl" />
      <mat-card-content>
        <div>
          Coffee:
          {{
            convertCoffeeTypeToString(expandedOrderItem.orderItem.coffeeType)
          }}
        </div>
        <div *ngIf="expandedOrderItem.orderItem.milkType">
          Milk:
          {{ convertMilkTypeToString(expandedOrderItem.orderItem.milkType) }}
        </div>
        <div *ngIf="expandedOrderItem.orderItem.additions?.length">
          {{
            expandedOrderItem.orderItem.additions!.length
              | i18nPlural : additionsMapping
          }}
        </div>
      </mat-card-content>
      <mat-card-actions *ngIf="actions">
        <button
          mat-raised-button
          *ngFor="let action of actions"
          [color]="action.color"
          (click)="onClick(action, expandedOrderItem, index)"
        >
          {{ action.buttonText }}
        </button>
      </mat-card-actions>
    </mat-card>
  </mat-grid-tile>
</mat-grid-list>
<ng-template #loadingProducts>
  <div class="loading-products">
    <mat-spinner></mat-spinner>
  </div>
</ng-template>
